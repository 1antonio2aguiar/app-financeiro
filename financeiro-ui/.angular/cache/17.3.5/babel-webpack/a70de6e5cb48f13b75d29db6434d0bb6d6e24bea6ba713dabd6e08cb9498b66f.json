{"ast":null,"code":"import { MessageService } from 'primeng/api';\nimport { BaseResourceFormComponent } from '../../../shared/components/base-resource-form/base-resource-form.component';\nimport { Validators } from '@angular/forms';\nimport { Logradouros } from './../../../shared/models/logradouros';\nimport { CidadesModalComponent } from '../../cidades/cidades-modal/cidades-modal.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../logradouros.service\";\nimport * as i2 from \"./../../tipos-logradouros/tipos-logradouros.service\";\nimport * as i3 from \"primeng/dynamicdialog\";\nimport * as i4 from \"primeng/api\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@angular/router\";\nimport * as i7 from \"../../../shared/components/bread-crumb/bread-crumb.component\";\nimport * as i8 from \"../../../shared/components/form-field-error/form-field-error.component\";\nimport * as i9 from \"primeng/button\";\nimport * as i10 from \"primeng/inputtext\";\nimport * as i11 from \"primeng/panel\";\nimport * as i12 from \"primeng/dropdown\";\nconst _c0 = () => ({\n  label: \"Logradouros\",\n  routerLink: \"/logradouros\"\n});\nconst _c1 = a0 => ({\n  label: a0\n});\nconst _c2 = (a0, a1) => [a0, a1];\nexport let LogradourosCadastroComponent = /*#__PURE__*/(() => {\n  class LogradourosCadastroComponent extends BaseResourceFormComponent {\n    constructor(logradourosService, tiposLogradourosService, injector, dialogService, messageService) {\n      super(injector, new Logradouros(), logradourosService, Logradouros.fromJson, new MessageService());\n      this.logradourosService = logradourosService;\n      this.tiposLogradourosService = tiposLogradourosService;\n      this.injector = injector;\n      this.dialogService = dialogService;\n      this.messageService = messageService;\n      this.botaoOnOf = false;\n      this.loadTiposLogradouros();\n      this.ptBrLocale = this.loadLocale();\n    }\n    buildResourceForm() {\n      this.resourceForm = this.formBuilder.group({\n        id: [null],\n        tiposLogradourosId: [null, [Validators.required]],\n        cidadesId: [null, [Validators.required]],\n        nome: [null, [Validators.required, Validators.minLength(1)]],\n        observacao: [null],\n        cidades: this.formBuilder.group({\n          estados: this.formBuilder.group({\n            uf: [null]\n          }),\n          id: [null, [Validators.required]],\n          nome: [null]\n        })\n      });\n    }\n    creationPageTitle() {\n      this.botaoOnOf = false;\n      return 'Cadastro de Novo Logradouro';\n    }\n    editionPageTitle() {\n      const logradourosName = this.resource.nome || '';\n      this.botaoOnOf = true;\n      return 'Editando Logradouro: ';\n    }\n    loadTiposLogradouros() {\n      this.tiposLogradourosService.listAll().then(tiposLogradouros => {\n        this.tiposLogradourosList = tiposLogradouros.map(c => ({\n          label: c.descricao,\n          value: c.id\n        }));\n      }).catch(erro => erro);\n    }\n    // Modal Cidade/estado\n    showCidades($event) {\n      const ref = this.dialogService.open(CidadesModalComponent, {\n        header: 'Selecione a Cidade',\n        width: '70%'\n      });\n      ref.onClose.subscribe(cidade => {\n        //console.log(cidade);\n        this.resourceForm.patchValue({\n          cidades: {\n            id: cidade.id,\n            nome: cidade.nome,\n            estados: {\n              uf: cidade.estados.nome\n            }\n          },\n          cidadesId: cidade.id\n        });\n      });\n    }\n    createResource() {\n      const resource = Logradouros.toJson(this.resourceForm.value);\n      this.resourceService.create(resource).subscribe(result => {\n        this.actionsForSuccess(result);\n      }, error => this.actionsForError(error));\n    }\n    updateResource() {\n      const resource = Logradouros.toJson(this.resourceForm.value);\n      this.resourceService.update(resource).subscribe(resource => {\n        this.actionsForSuccess(resource);\n      }, error => this.actionsForError(error));\n    }\n    static #_ = this.ɵfac = function LogradourosCadastroComponent_Factory(t) {\n      return new (t || LogradourosCadastroComponent)(i0.ɵɵdirectiveInject(i1.LogradourosService), i0.ɵɵdirectiveInject(i2.TiposLogradourosService), i0.ɵɵdirectiveInject(i0.Injector), i0.ɵɵdirectiveInject(i3.DialogService), i0.ɵɵdirectiveInject(i4.MessageService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LogradourosCadastroComponent,\n      selectors: [[\"app-logradouros-cadastro\"]],\n      features: [i0.ɵɵInheritDefinitionFeature],\n      decls: 34,\n      vars: 14,\n      consts: [[3, \"items\"], [1, \"margin\"], [\"header\", \"Preencha o Formulario:\"], [3, \"submit\", \"formGroup\"], [1, \"p-grid\", \"ui-fluid\", 2, \"margin-top\", \"5px\"], [\"formGroupName\", \"cidades\", 1, \"p-col-12\", \"p-md-10\", \"p-lg-10\"], [\"for\", \"cidade\"], [1, \"ui-inputgroup\"], [\"pButton\", \"\", \"type\", \"button\", \"label\", \"Buscar\", 3, \"click\", \"disabled\"], [\"type\", \"text\", \"pInputText\", \"\", \"placeholder\", \"Informe a cidade\", \"formControlName\", \"nome\", \"disabled\", \"true\", 2, \"font-weight\", \"bold\"], [\"formGroupName\", \"cidades\", 1, \"p-col-12\", \"p-md-2\", \"p-lg-2\"], [\"for\", \"sigla\"], [\"formGroupName\", \"estados\"], [\"id\", \"uf\", \"type\", \"text\", \"size\", \"2\", \"pInputText\", \"\", \"formControlName\", \"uf\", \"disabled\", \"true\", 2, \"font-weight\", \"bold\"], [1, \"p-col-12\", \"p-md-3\", \"p-lg-3\"], [\"for\", \"tipoLogradouro\"], [\"id\", \"tipoLogradouro\", \"name\", \"tipoLogradouro\", \"placeholder\", \"Selecione\", \"formControlName\", \"tiposLogradourosId\", 3, \"options\", \"disabled\", \"filter\"], [1, \"p-col-12\", \"p-md-9\", \"p-lg-9\"], [\"for\", \"nome\"], [\"id\", \"nome\", \"type\", \"text\", \"size\", \"80\", \"pInputText\", \"\", \"formControlName\", \"nome\"], [\"header-colum\", \"Nome\", 3, \"form-control\"], [1, \"p-col-12\", \"p-md-12\", \"p-lg-12\"], [\"for\", \"observacao\"], [\"id\", \"observacao\", \"type\", \"text\", \"size\", \"200\", \"pInputText\", \"\", \"formControlName\", \"observacao\"], [1, \"p-col-12\", \"p-md-2\", \"p-lg-2\"], [\"pButton\", \"\", \"type\", \"button\", \"label\", \"Voltar\", \"routerLink\", \"/logradouros\", 1, \"ui-button-danger\"], [\"pButton\", \"\", \"type\", \"button\", \"type\", \"submit\", \"icon\", \"pi pi-check\", \"label\", \"Salvar\", 1, \"ui-button-success\", 3, \"disabled\"]],\n      template: function LogradourosCadastroComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelement(0, \"app-bread-crumb\", 0);\n          i0.ɵɵelementStart(1, \"div\", 1)(2, \"p-panel\", 2)(3, \"form\", 3);\n          i0.ɵɵlistener(\"submit\", function LogradourosCadastroComponent_Template_form_submit_3_listener() {\n            return ctx.submitForm();\n          });\n          i0.ɵɵelementStart(4, \"div\", 4)(5, \"div\", 5)(6, \"label\", 6);\n          i0.ɵɵtext(7, \"Cidade\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(8, \"div\", 7)(9, \"button\", 8);\n          i0.ɵɵlistener(\"click\", function LogradourosCadastroComponent_Template_button_click_9_listener($event) {\n            return ctx.showCidades($event);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(10, \"input\", 9);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(11, \"div\", 10)(12, \"label\", 11);\n          i0.ɵɵtext(13, \"Estado\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"span\", 12);\n          i0.ɵɵelement(15, \"input\", 13);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(16, \"div\", 14)(17, \"label\", 15);\n          i0.ɵɵtext(18, \"Tipo Logradouro\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(19, \"p-dropdown\", 16);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(20, \"div\", 17)(21, \"label\", 18);\n          i0.ɵɵtext(22, \"Nome\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(23, \"input\", 19)(24, \"app-form-field-error\", 20);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(25, \"div\", 21)(26, \"label\", 22);\n          i0.ɵɵtext(27, \"Observa\\u00E7\\u00E3o\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(28, \"input\", 23);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(29, \"div\", 4)(30, \"div\", 24);\n          i0.ɵɵelement(31, \"button\", 25);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(32, \"div\", 24);\n          i0.ɵɵelement(33, \"button\", 26);\n          i0.ɵɵelementEnd()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"items\", i0.ɵɵpureFunction2(11, _c2, i0.ɵɵpureFunction0(8, _c0), i0.ɵɵpureFunction1(9, _c1, ctx.pageTitle)));\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"formGroup\", ctx.resourceForm);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"disabled\", ctx.botaoOnOf);\n          i0.ɵɵadvance(10);\n          i0.ɵɵproperty(\"options\", ctx.tiposLogradourosList)(\"disabled\", ctx.botaoOnOf)(\"filter\", true);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"form-control\", ctx.resourceForm.get(\"nome\"));\n          i0.ɵɵadvance(9);\n          i0.ɵɵproperty(\"disabled\", ctx.submittingForm || ctx.resourceForm.invalid);\n        }\n      },\n      dependencies: [i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.FormGroupDirective, i5.FormControlName, i5.FormGroupName, i6.RouterLink, i7.BreadCrumbComponent, i8.FormFieldErrorComponent, i9.ButtonDirective, i10.InputText, i11.Panel, i12.Dropdown]\n    });\n  }\n  return LogradourosCadastroComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}