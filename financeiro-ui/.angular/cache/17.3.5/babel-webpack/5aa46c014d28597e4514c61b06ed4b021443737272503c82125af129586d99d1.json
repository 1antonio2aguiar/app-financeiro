{"ast":null,"code":"import { MessageService } from 'primeng/api';\nimport { BaseResourceFormComponent } from '../../../shared/components/base-resource-form/base-resource-form.component';\nimport { Validators } from '@angular/forms';\nimport { Ceps } from './../../../shared/models/ceps';\nimport { CidadesModalComponent } from './../../cidades/cidades-modal/cidades-modal.component';\nimport { BairrosModalComponent } from './../../bairros/bairros-modal/bairros-modal.component';\nimport { LogradourosModalComponent } from './../../logradouros/logradouros-modal/logradouros-modal.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../ceps.service\";\nimport * as i2 from \"./../../bairros/bairros.service\";\nimport * as i3 from \"./../../logradouros/logradouros.service\";\nimport * as i4 from \"primeng/dynamicdialog\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@angular/router\";\nimport * as i7 from \"../../../shared/components/bread-crumb/bread-crumb.component\";\nimport * as i8 from \"../../../shared/components/form-field-error/form-field-error.component\";\nimport * as i9 from \"angular-imask\";\nimport * as i10 from \"primeng/button\";\nimport * as i11 from \"primeng/inputtext\";\nimport * as i12 from \"primeng/panel\";\nimport * as i13 from \"primeng/dropdown\";\nconst _c0 = () => ({\n  label: \"Ceps\",\n  routerLink: \"/ceps\"\n});\nconst _c1 = a0 => ({\n  label: a0\n});\nconst _c2 = (a0, a1) => [a0, a1];\nexport let CepsCadastroComponent = /*#__PURE__*/(() => {\n  class CepsCadastroComponent extends BaseResourceFormComponent {\n    constructor(cepsService, bairrosService, logradourosService, injector, dialogService) {\n      super(injector, new Ceps(), cepsService, Ceps.fromJson, new MessageService());\n      this.cepsService = cepsService;\n      this.bairrosService = bairrosService;\n      this.logradourosService = logradourosService;\n      this.injector = injector;\n      this.dialogService = dialogService;\n      this.bairroList = [];\n      this.logradouroList = [];\n      this.botaoOnOf = false;\n      this.identificacao = [{\n        value: 'U',\n        label: 'Único'\n      }, {\n        value: 'D',\n        label: 'Direita'\n      }, {\n        value: 'E',\n        label: 'Esquerda'\n      }, {\n        value: 'I',\n        label: 'Impar'\n      }, {\n        value: 'P',\n        label: 'par'\n      }, {\n        value: 'A',\n        label: 'Ambos'\n      }];\n      this.masks = {\n        mask: [{\n          mask: '00.000-000'\n        }]\n      };\n    }\n    buildResourceForm() {\n      this.resourceForm = this.formBuilder.group({\n        id: [null],\n        cep: [null, [Validators.required]],\n        numeroIni: [1],\n        numeroFin: [999999999],\n        identificacao: [\"U\"],\n        cidades: this.formBuilder.group({\n          estados: this.formBuilder.group({\n            uf: [null],\n            nome: [null]\n          }),\n          id: [null, [Validators.required]],\n          nome: [null]\n        }),\n        bairrosId: [null],\n        bairros: this.formBuilder.group({\n          id: [null, [Validators.required, Validators.maxLength(10)]],\n          nome: [null]\n        }),\n        logradourosId: [null],\n        logradouros: this.formBuilder.group({\n          id: [null, [Validators.required, Validators.maxLength(10)]],\n          nome: [null],\n          tiposLogradouros: this.formBuilder.group({\n            sigla: [null]\n          })\n        })\n      });\n    }\n    creationPageTitle() {\n      this.botaoOnOf = false;\n      return 'Cadastro de Novo Ceps';\n    }\n    editionPageTitle() {\n      this.botaoOnOf = true;\n      return 'Editando Ceps: ';\n    }\n    // Modal Cidade/estado\n    showCidades($event) {\n      const ref = this.dialogService.open(CidadesModalComponent, {\n        header: 'Selecione a Cidade',\n        width: '70%'\n      });\n      ref.onClose.subscribe(cidade => {\n        //console.log(cidade);\n        this.resourceForm.patchValue({\n          cidades: {\n            id: cidade.id,\n            nome: cidade.nome,\n            estados: {\n              uf: cidade.estados.uf,\n              nome: cidade.estados.nome\n            }\n          },\n          cidadesId: cidade.id\n        });\n      });\n    }\n    // Modal Bairro\n    showBairros($event) {\n      const ref = this.dialogService.open(BairrosModalComponent, {\n        header: 'Selecione o Bairro',\n        width: '70%',\n        data: {\n          // parte de filtrar bairros da cidade\n          idCidade: this.resourceForm.get('cidades').get('id').value\n        }\n      });\n      ref.onClose.subscribe(bairro => {\n        this.resourceForm.patchValue({\n          bairros: {\n            id: bairro.id,\n            nome: bairro.nome\n          },\n          bairrosId: bairro.id\n        });\n      });\n    }\n    // Modal Logradouro\n    showLogradouros($event) {\n      const ref = this.dialogService.open(LogradourosModalComponent, {\n        header: 'Selecione o Logradouro',\n        width: '70%',\n        data: {\n          // parte de filtrar logradouros da cidade\n          idCidade: this.resourceForm.get('cidades').get('id').value\n        }\n      });\n      ref.onClose.subscribe(logradouro => {\n        this.resourceForm.patchValue({\n          logradouros: {\n            id: logradouro.id,\n            nome: logradouro.nome,\n            tiposLogradouros: {\n              sigla: logradouro.tiposLogradouros.sigla\n            }\n          },\n          logradourosId: logradouro.id\n        });\n      });\n    }\n    createResource() {\n      const resource = Ceps.fromJson(this.resourceForm.value);\n      this.resourceService.create(resource).subscribe(result => {\n        this.actionsForSuccess(result);\n      }, error => this.actionsForError(error));\n    }\n    updateResource() {\n      const resource = Ceps.toJson(this.resourceForm.value);\n      this.resourceService.update(resource).subscribe(resource => {\n        this.actionsForSuccess(resource);\n      }, error => this.actionsForError(error));\n    }\n    static #_ = this.ɵfac = function CepsCadastroComponent_Factory(t) {\n      return new (t || CepsCadastroComponent)(i0.ɵɵdirectiveInject(i1.CepsService), i0.ɵɵdirectiveInject(i2.BairrosService), i0.ɵɵdirectiveInject(i3.LogradourosService), i0.ɵɵdirectiveInject(i0.Injector), i0.ɵɵdirectiveInject(i4.DialogService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: CepsCadastroComponent,\n      selectors: [[\"app-ceps-cadastro\"]],\n      features: [i0.ɵɵInheritDefinitionFeature],\n      decls: 55,\n      vars: 16,\n      consts: [[3, \"items\"], [1, \"margin\"], [\"header\", \"Preencha o Formulario:\"], [3, \"submit\", \"formGroup\"], [1, \"p-grid\", \"ui-fluid\", 2, \"margin-top\", \"5px\"], [\"formGroupName\", \"cidades\", 1, \"p-col-12\", \"p-md-10\", \"p-lg-10\"], [\"for\", \"cidade\"], [1, \"ui-inputgroup\"], [\"pButton\", \"\", \"type\", \"button\", \"label\", \"Buscar\", 3, \"click\", \"disabled\"], [\"type\", \"text\", \"pInputText\", \"\", \"placeholder\", \"Informe a cidade\", \"formControlName\", \"nome\", \"disabled\", \"true\", 2, \"font-weight\", \"bold\"], [\"formGroupName\", \"cidades\", 1, \"p-col-12\", \"p-md-2\", \"p-lg-2\"], [\"for\", \"sigla\"], [\"formGroupName\", \"estados\"], [\"id\", \"nome\", \"type\", \"text\", \"size\", \"2\", \"pInputText\", \"\", \"formControlName\", \"nome\", \"disabled\", \"true\", 2, \"font-weight\", \"bold\"], [\"formGroupName\", \"bairros\", 1, \"p-col-12\", \"p-md-12\", \"p-lg-12\"], [\"type\", \"text\", \"pInputText\", \"\", \"placeholder\", \"Informe o bairro\", \"formControlName\", \"nome\", \"disabled\", \"true\", 2, \"font-weight\", \"bold\"], [\"formGroupName\", \"logradouros\", 1, \"p-col-12\", \"p-md-2\", \"p-lg-2\"], [\"formGroupName\", \"tiposLogradouros\"], [\"type\", \"text\", \"pInputText\", \"\", \"formControlName\", \"sigla\", \"disabled\", \"true\", 2, \"font-weight\", \"bold\"], [\"formGroupName\", \"logradouros\", 1, \"p-col-12\", \"p-md-10\", \"p-lg-10\"], [\"for\", \"nome\"], [1, \"p-col-12\", \"p-md-6\", \"p-lg-6\"], [\"for\", \"cep\"], [\"placeholder\", \"Informe o CEP\", \"id\", \"cep\", \"type\", \"text\", \"size\", \"20\", \"pInputText\", \"\", \"formControlName\", \"cep\", 2, \"font-weight\", \"bold\", 3, \"imask\", \"unmask\"], [\"header-colum\", \"cep\", 3, \"form-control\"], [1, \"p-col-12\", \"p-md-2\", \"p-lg-2\"], [\"for\", \"numeroIni\"], [\"id\", \"numeroIni\", \"type\", \"text\", \"size\", \"20\", \"pInputText\", \"\", \"formControlName\", \"numeroIni\"], [\"for\", \"numeroFin'\"], [\"id\", \"numeroFin\", \"type\", \"text\", \"size\", \"20\", \"pInputText\", \"\", \"formControlName\", \"numeroFin\"], [\"for\", \"identificacao\"], [\"id\", \"identificacao\", \"name\", \"identificacao\", \"formControlName\", \"identificacao\", 3, \"options\"], [\"pButton\", \"\", \"type\", \"button\", \"label\", \"Voltar\", \"routerLink\", \"/ceps\", 1, \"ui-button-danger\"], [\"pButton\", \"\", \"type\", \"button\", \"type\", \"submit\", \"icon\", \"pi pi-check\", \"label\", \"Salvar\", 1, \"ui-button-success\", 3, \"disabled\"]],\n      template: function CepsCadastroComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelement(0, \"app-bread-crumb\", 0);\n          i0.ɵɵelementStart(1, \"div\", 1)(2, \"p-panel\", 2)(3, \"form\", 3);\n          i0.ɵɵlistener(\"submit\", function CepsCadastroComponent_Template_form_submit_3_listener() {\n            return ctx.submitForm();\n          });\n          i0.ɵɵelementStart(4, \"div\", 4)(5, \"div\", 5)(6, \"label\", 6);\n          i0.ɵɵtext(7, \"Cidade\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(8, \"div\", 7)(9, \"button\", 8);\n          i0.ɵɵlistener(\"click\", function CepsCadastroComponent_Template_button_click_9_listener($event) {\n            return ctx.showCidades($event);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(10, \"input\", 9);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(11, \"div\", 10)(12, \"label\", 11);\n          i0.ɵɵtext(13, \"Estado\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"span\", 12);\n          i0.ɵɵelement(15, \"input\", 13);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(16, \"div\", 14)(17, \"label\", 6);\n          i0.ɵɵtext(18, \"Bairro\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(19, \"div\", 7)(20, \"button\", 8);\n          i0.ɵɵlistener(\"click\", function CepsCadastroComponent_Template_button_click_20_listener($event) {\n            return ctx.showBairros($event);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(21, \"input\", 15);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(22, \"div\", 16)(23, \"label\", 6);\n          i0.ɵɵtext(24, \"Logradouro\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(25, \"div\", 7)(26, \"button\", 8);\n          i0.ɵɵlistener(\"click\", function CepsCadastroComponent_Template_button_click_26_listener($event) {\n            return ctx.showLogradouros($event);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(27, \"span\", 17);\n          i0.ɵɵelement(28, \"input\", 18);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(29, \"div\", 19)(30, \"label\", 20);\n          i0.ɵɵtext(31, \". \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(32, \"input\", 13);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(33, \"div\", 21)(34, \"label\", 22);\n          i0.ɵɵtext(35, \"C.E.P\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(36, \"input\", 23)(37, \"app-form-field-error\", 24);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(38, \"div\", 25)(39, \"label\", 26);\n          i0.ɵɵtext(40, \"N\\u00FAmero Inicial\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(41, \"input\", 27);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(42, \"div\", 25)(43, \"label\", 28);\n          i0.ɵɵtext(44, \"N\\u00FAmero Final\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(45, \"input\", 29);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(46, \"div\", 25)(47, \"label\", 30);\n          i0.ɵɵtext(48, \"Identifica\\u00E7\\u00E3o\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(49, \"p-dropdown\", 31);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(50, \"div\", 4)(51, \"div\", 25);\n          i0.ɵɵelement(52, \"button\", 32);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(53, \"div\", 25);\n          i0.ɵɵelement(54, \"button\", 33);\n          i0.ɵɵelementEnd()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"items\", i0.ɵɵpureFunction2(13, _c2, i0.ɵɵpureFunction0(10, _c0), i0.ɵɵpureFunction1(11, _c1, ctx.pageTitle)));\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"formGroup\", ctx.resourceForm);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"disabled\", ctx.botaoOnOf);\n          i0.ɵɵadvance(11);\n          i0.ɵɵproperty(\"disabled\", ctx.botaoOnOf);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"disabled\", ctx.botaoOnOf);\n          i0.ɵɵadvance(10);\n          i0.ɵɵproperty(\"imask\", ctx.masks)(\"unmask\", true);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"form-control\", ctx.resourceForm.get(\"cep\"));\n          i0.ɵɵadvance(12);\n          i0.ɵɵproperty(\"options\", ctx.identificacao);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"disabled\", ctx.submittingForm || ctx.resourceForm.invalid);\n        }\n      },\n      dependencies: [i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.FormGroupDirective, i5.FormControlName, i5.FormGroupName, i6.RouterLink, i7.BreadCrumbComponent, i8.FormFieldErrorComponent, i9.IMaskDirective, i10.ButtonDirective, i11.InputText, i12.Panel, i13.Dropdown]\n    });\n  }\n  return CepsCadastroComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}