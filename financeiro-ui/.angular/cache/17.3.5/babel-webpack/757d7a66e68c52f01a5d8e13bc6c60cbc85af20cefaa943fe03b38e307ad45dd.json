{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { BaseResourceFormComponent } from 'src/app/shared/components/base-resource-form/base-resource-form.component';\nimport { MessageService } from 'primeng/api';\nimport { Validators } from '@angular/forms';\nimport { environment } from 'src/environments/environment';\nimport { Contatos } from 'src/app/shared/models/contatos';\nlet ContatosModalComponent = class ContatosModalComponent extends BaseResourceFormComponent {\n  constructor(contatosService, injector, messageService, dialogService, ref) {\n    super(injector, new Contatos(), contatosService, Contatos.fromJson, new MessageService());\n    this.contatosService = contatosService;\n    this.injector = injector;\n    this.messageService = messageService;\n    this.dialogService = dialogService;\n    this.ref = ref;\n    this.tiposContatosList = [{\n      value: 'TR',\n      selected: false,\n      label: 'TELEFONE RESIDENCIAL'\n    }, {\n      value: 'CELULAR',\n      selected: false,\n      label: 'TELEFONE CELULAR'\n    }, {\n      value: 'WHATSUP',\n      selected: false,\n      label: 'WHATSUP'\n    }, {\n      value: 'EMAIL',\n      selected: false,\n      label: 'EMAIL'\n    }, {\n      value: 'RECADO',\n      selected: false,\n      label: 'TELEFONE PARA RECADO'\n    }, {\n      value: 'WEB',\n      selected: false,\n      label: 'PAGINA WEB'\n    }, {\n      value: 'FAX',\n      selected: false,\n      label: 'FAX'\n    }, {\n      value: 'OUTRO',\n      selected: false,\n      label: 'OUTRO'\n    }];\n    //Move os dados da pessoas para o modal de cadastro de enderecos\n    this.dadosPessoa = document.getElementById('nome').value + ' CPF: ' + document.getElementById('cpfCnpj').value;\n    this.env = environment;\n    this.contatoId = 0;\n    this.buildResourceForm(); /*limpa o formulario/resourceForm */\n    if (this.env.currentActionGlobal == \"DELETE\" || this.env.currentActionGlobal == \"EDIT\") {\n      this.env.botaoOnOf = true;\n    } else {\n      this.env.botaoOnOf = false;\n    }\n  }\n  buildResourceForm() {\n    this.resourceForm = this.formBuilder.group({\n      id: [null],\n      pessoa: [document.getElementById('id').value],\n      contato: [null, [Validators.required, Validators.minLength(5)]],\n      tipoContato: [null, [Validators.required]]\n    });\n  }\n  submitForm() {\n    //this.submittingForm = true;\n    if (this.env.currentActionGlobal === 'NEW') {\n      // clicou no + (novo)\n      this.createResource();\n    } else {\n      if (this.env.currentActionGlobal === 'EDIT') {\n        // clicou no update\n        this.updateResource();\n      } else {\n        // clicou no delete\n        this.deleteResource();\n      }\n    }\n  }\n  deleteResource() {\n    this.contatosService.deleteContato(this.contatoId).then(response => {\n      this.buildResourceForm(); /*limpa o formulario/resorceForm*/\n      this.ref.close();\n    });\n  }\n  updateResource() {\n    const resource = this.jsonDataToResourceFn(this.resourceForm.value);\n    // copia os dados de Contatos(classe) para contatos(variavel json)\n    let contatos = JSON.stringify(resource);\n    // Chama a funcao que faz update\n    this.contatosService.updateContato(contatos).then(response => {\n      this.buildResourceForm(); /*limpa o formulario/resorceForm*/\n      this.ref.close();\n    });\n  }\n  createResource() {\n    const resource = this.jsonDataToResourceFn(this.resourceForm.value);\n    // copia os dados de Contatos(classe) para contatos(variavel json)\n    let contatos = JSON.stringify(resource);\n    // Chama a funcao que insere\n    this.contatosService.createContato(contatos).then(response => {\n      this.buildResourceForm(); /*limpa o formulario/resorceForm*/\n      this.ref.close();\n    }).catch(error => {\n      console.log(error);\n      this.messageService.add({\n        severity: 'error',\n        summary: 'Erro',\n        detail: error.error[0].mensagemUsuario\n      });\n    });\n  }\n  fecharModal() {\n    this.ref.close();\n  }\n  // No edit retorna os dados aqui.\n  ngOnInit() {\n    this.contatosService.contatosEditSubscribeId(resources => {\n      this.contatoId = resources.id;\n      //console.log(\"TIPO \", resources.tipoContato)\n      this.resourceForm.patchValue({\n        id: resources.id,\n        tipoContato: resources.tipoContato,\n        contato: resources.contato\n      });\n    });\n    if (this.env.currentActionGlobal === \"DELETE\") {\n      document.getElementById('tipoContatoDdw').disabled = true;\n      document.getElementById('contato').disabled = true;\n    }\n  }\n};\nContatosModalComponent = __decorate([Component({\n  selector: 'app-contatos-modal',\n  templateUrl: './contatos-modal.component.html',\n  styleUrls: ['./contatos-modal.component.css']\n})], ContatosModalComponent);\nexport { ContatosModalComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}