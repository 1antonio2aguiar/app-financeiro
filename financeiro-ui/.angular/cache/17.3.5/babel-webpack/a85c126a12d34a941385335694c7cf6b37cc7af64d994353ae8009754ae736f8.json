{"ast":null,"code":"import { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"primeng/api\";\nimport * as i3 from \"./../seguranca.service\";\nfunction LoginFormComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵtext(1, \" * Digite seu CPF/CNPJ para recuperar sua senha! \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let LoginFormComponent = /*#__PURE__*/(() => {\n  class LoginFormComponent {\n    ngOnInit() {\n      if (sessionStorage.getItem('usuario') != null) {\n        this.router.navigate(['home']);\n      }\n      this.version = environment.version;\n      this.selectedSistema = environment.sistemaId;\n    }\n    constructor(router, messageService, segurancaService, route) {\n      this.router = router;\n      this.messageService = messageService;\n      this.segurancaService = segurancaService;\n      this.route = route;\n      this.empresa = null;\n      this.selectedSistema = null;\n      this.version = '';\n      this.show = false;\n      this.captcha = true;\n      this.isVisible = false;\n      this.masks = {\n        mask: [{\n          mask: '000.000.000-00'\n        }, {\n          mask: '00.000.000/0000-00'\n        }]\n      };\n    }\n    login(usuario, senha) {\n      this.empresa = '1';\n      if (this.captcha) {\n        usuario = usuario.replace(/[^\\d]+/g, '');\n        usuario = usuario.replace('-', '');\n        usuario = usuario.replace('/', '');\n        this.segurancaService.login(usuario, senha, this.empresa, this.selectedSistema).then(resultado => {\n          console.log(resultado);\n          if (resultado.response != null) {\n            console.log(resultado.response.usuarios);\n            sessionStorage.setItem('usuario', JSON.stringify(resultado.response.usuarios));\n            /*sessionStorage.setItem('dadosLogin', JSON.stringify(resultado.response));\n            sessionStorage.setItem('empresa', this.empresa);\n            sessionStorage.setItem('sistema', this.selectedSistema);*/\n            this.router.navigate(['home']);\n          } else {\n            this.captcha = false;\n            window.grecaptcha.reset();\n            this.messageService.add({\n              severity: 'error',\n              summary: 'Atenção',\n              detail: resultado.error.message,\n              sticky: false,\n              life: 15000\n            });\n          }\n        }).catch(erroResponse => {\n          console.log();\n          this.captcha = false;\n          window.grecaptcha.reset();\n          this.messageService.add({\n            severity: 'error',\n            summary: 'Atenção',\n            detail: erroResponse.error.message,\n            sticky: false,\n            life: 15000\n          });\n        });\n      } else {\n        this.messageService.add({\n          severity: 'error',\n          summary: 'Atenção',\n          detail: 'Confirme o Não sou um robô',\n          sticky: false,\n          life: 8000\n        });\n      }\n    }\n    showResponse(event) {\n      this.captcha = true;\n    }\n    clickRecuperar(cpfCnpj) {\n      console.log(cpfCnpj);\n      this.segurancaService.recuperarSenhacpfCnpj(cpfCnpj.replace(/[^\\d]+/g, '')).then(resultado => {\n        this.isVisible = !this.isVisible;\n        this.messageService.add({\n          severity: 'info',\n          summary: 'Atenção',\n          detail: resultado.msg,\n          sticky: false,\n          life: 15000\n        });\n      }).catch(erroResponse => {\n        this.captcha = false;\n        this.messageService.add({\n          severity: 'error',\n          summary: 'Atenção',\n          detail: erroResponse.error.erro,\n          sticky: false,\n          life: 15000\n        });\n      });\n    }\n    static #_ = this.ɵfac = function LoginFormComponent_Factory(t) {\n      return new (t || LoginFormComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.MessageService), i0.ɵɵdirectiveInject(i3.SegurancaService), i0.ɵɵdirectiveInject(i1.ActivatedRoute));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LoginFormComponent,\n      selectors: [[\"app-login-form\"]],\n      decls: 40,\n      vars: 9,\n      consts: [[\"f\", \"ngForm\"], [\"usuario\", \"\"], [\"senha\", \"\"], [\"id\", \"snow\", 1, \"snow\"], [1, \"container\"], [1, \"left\"], [1, \"align-center\"], [\"src\", \"assets/logoCodiubLogin.png\", \"width\", \"130px\", 1, \"logo\"], [1, \"align-center\", \"version\"], [1, \"right\", \"align-center\"], [\"autocomplete\", \"off\"], [1, \"ui-g-12\"], [\"class\", \"ui-g-12 warning\", 4, \"ngIf\"], [\"pInputText\", \"\", \"placeholder\", \"CPF/CNPJ\", \"name\", \"usuario\", \"ngModel\", \"\", 1, \"inputtext\", 3, \"imask\", \"unmask\"], [1, \"ui-g-12\", 3, \"hidden\"], [\"pButton\", \"\", \"type\", \"submit\", \"label\", \"Voltar\", 1, \"btn\", \"btnVoltar\", 3, \"click\"], [\"pButton\", \"\", \"type\", \"submit\", \"label\", \"Recuperar\", 1, \"btn\", \"btnRecuperar\", 3, \"click\"], [\"pInputText\", \"\", \"type\", \"password\", \"name\", \"senha\", \"placeholder\", \"Senha\", \"ngModel\", \"\", \"required\", \"\", 1, \"inputtext\"], [1, \"ui-g-12\", \"captcha\", 3, \"hidden\"], [\"siteKey\", \"6Lf44awUAAAAAJuF_N-JVax3_AkO5_Yt5bsulxR4\", \"initCallback\", \"loadCaptcha\", 3, \"onResponse\"], [\"pButton\", \"\", \"type\", \"submit\", \"label\", \"Login\", 1, \"btnLogin\", 3, \"click\", \"disabled\"], [1, \"recover\"], [\"href\", \"javascript:void(0)\", 1, \"recover\", 3, \"click\"], [1, \"ui-g-12\", \"warning\"]],\n      template: function LoginFormComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"body\", 3)(1, \"div\", 4);\n          i0.ɵɵelement(2, \"p-toast\");\n          i0.ɵɵelementStart(3, \"div\", 5);\n          i0.ɵɵelement(4, \"br\");\n          i0.ɵɵelementStart(5, \"div\", 6)(6, \"h4\");\n          i0.ɵɵtext(7, \"Angular ProjectMaker\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(8, \"h1\")(9, \"b\");\n          i0.ɵɵtext(10, \"Esquadro\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelement(11, \"img\", 7)(12, \"br\");\n          i0.ɵɵelementStart(13, \"div\", 8)(14, \"h6\");\n          i0.ɵɵtext(15);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(16, \"div\", 9)(17, \"form\", 10, 0)(19, \"div\", 11);\n          i0.ɵɵtemplate(20, LoginFormComponent_div_20_Template, 2, 0, \"div\", 12);\n          i0.ɵɵelement(21, \"input\", 13, 1);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(23, \"div\", 14)(24, \"button\", 15);\n          i0.ɵɵlistener(\"click\", function LoginFormComponent_Template_button_click_24_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.isVisible = !ctx.isVisible);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(25, \"button\", 16);\n          i0.ɵɵlistener(\"click\", function LoginFormComponent_Template_button_click_25_listener() {\n            i0.ɵɵrestoreView(_r1);\n            const usuario_r2 = i0.ɵɵreference(22);\n            return i0.ɵɵresetView(ctx.clickRecuperar(usuario_r2.value));\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(26, \"div\", 14);\n          i0.ɵɵelement(27, \"input\", 17, 2);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(29, \"div\", 18)(30, \"p-captcha\", 19);\n          i0.ɵɵlistener(\"onResponse\", function LoginFormComponent_Template_p_captcha_onResponse_30_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.showResponse($event));\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(31, \"div\", 14)(32, \"button\", 20);\n          i0.ɵɵlistener(\"click\", function LoginFormComponent_Template_button_click_32_listener() {\n            i0.ɵɵrestoreView(_r1);\n            const usuario_r2 = i0.ɵɵreference(22);\n            const senha_r3 = i0.ɵɵreference(28);\n            return i0.ɵɵresetView(ctx.login(usuario_r2.value, senha_r3.value));\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(33, \"br\")(34, \"br\");\n          i0.ɵɵelementStart(35, \"span\", 21);\n          i0.ɵɵtext(36, \"Esqueceu sua senha? \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(37, \"a\", 22);\n          i0.ɵɵlistener(\"click\", function LoginFormComponent_Template_a_click_37_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.isVisible = !ctx.isVisible);\n          });\n          i0.ɵɵelementStart(38, \"b\");\n          i0.ɵɵtext(39, \"Clique aqui.\");\n          i0.ɵɵelementEnd()()()()()()();\n        }\n        if (rf & 2) {\n          const f_r4 = i0.ɵɵreference(18);\n          i0.ɵɵadvance(15);\n          i0.ɵɵtextInterpolate1(\"v\", ctx.version, \"\");\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ctx.isVisible);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"imask\", ctx.masks)(\"unmask\", true);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"hidden\", !ctx.isVisible);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"hidden\", ctx.isVisible);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"hidden\", ctx.isVisible);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"hidden\", ctx.isVisible);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"disabled\", !f_r4.valid);\n        }\n      },\n      styles: [\".body[_ngcontent-%COMP%]{margin:0;height:100vh;padding-left:0!important;background-size:cover;display:flex;align-items:center;justify-content:center;font-weight:100!important}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-weight:100!important}.recover[_ngcontent-%COMP%]{font-size:10px;color:#000}.btnVoltar[_ngcontent-%COMP%], .btnVoltar[_ngcontent-%COMP%]:hover{background-color:#d62929!important;border:1px solid #d62929;margin-right:10px}.btnVoltar[_ngcontent-%COMP%], .btnRecuperar[_ngcontent-%COMP%]{width:130px}.center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.key[_ngcontent-%COMP%]{margin-right:5px}.warning[_ngcontent-%COMP%]{text-align:left;padding-left:18px;color:red;font-size:10px;margin-bottom:10px}.container[_ngcontent-%COMP%]{background-color:#000;border-radius:10px;box-shadow:1px 1px 14px 1px #000;width:640px;height:350px;margin:100px auto auto}.left[_ngcontent-%COMP%]{background-color:#1b2433;border-radius:10px 0 0 10px;width:290px;height:350px;float:left}.logo[_ngcontent-%COMP%]{display:block;margin:40px auto -20px}.align-center[_ngcontent-%COMP%]{width:100%;text-align:center;color:#fff}.btnLogin[_ngcontent-%COMP%]{width:300px}.captcha[_ngcontent-%COMP%]{padding-left:23.5px}.inputtext[_ngcontent-%COMP%]{width:300px}.mini[_ngcontent-%COMP%]{text-align:center;color:#000;font-size:10px}.right[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:#fff;border-radius:0 10px 10px 0;width:350px;height:350px;float:left}.version[_ngcontent-%COMP%]{margin-top:-15px}@media (hover:none){.container[_ngcontent-%COMP%]{margin-top:0;background-color:transparent}.left[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]{width:100vw;border-radius:0;height:50vh;float:inherit}.right[_ngcontent-%COMP%]{z-index:50}.left[_ngcontent-%COMP%]{z-index:40}.logo[_ngcontent-%COMP%]{margin-top:-5%}.version[_ngcontent-%COMP%]{margin-top:-1%}.captcha[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;margin-left:-6px}#loginfooter[_ngcontent-%COMP%]{display:none}.recover[_ngcontent-%COMP%]{margin-top:9px!important;font-size:12px!important}}.center[_ngcontent-%COMP%]{width:100%;height:50px;display:flex;align-items:center;justify-content:center;margin-top:30px}.krypton[_ngcontent-%COMP%]{z-index:100;width:70px}.signal[_ngcontent-%COMP%]{z-index:90;border:0;box-shadow:0 0 40px red,inset 0 0 20px #db2143;border-radius:50%;height:50px;width:50px;opacity:0;position:absolute;animation:_ngcontent-%COMP%_pulsate 2.2s ease-out;animation-iteration-count:infinite}@keyframes _ngcontent-%COMP%_pulsate{0%{transform:scale(.1);opacity:0}50%{opacity:.7}to{transform:scale(1.5);opacity:0}}#snow[_ngcontent-%COMP%]{background-color:#000!important;background:url(bg.jpg);background-size:cover;height:100%;left:0;position:absolute;top:0;width:100%;z-index:1}.loginfooter[_ngcontent-%COMP%]{z-index:0!important}.container[_ngcontent-%COMP%]{z-index:20!important}\"]\n    });\n  }\n  return LoginFormComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}