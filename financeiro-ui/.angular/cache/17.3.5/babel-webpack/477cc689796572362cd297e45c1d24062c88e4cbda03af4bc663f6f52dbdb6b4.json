{"ast":null,"code":"import { BaseResourceFormComponent } from '../../../shared/components/base-resource-form/base-resource-form.component';\nimport { MessageService } from 'primeng/api';\nimport { environment } from 'src/environments/environment';\nimport { Contratos } from 'src/app/shared/models/contratos';\nimport { ParcelasContratosFiltro } from '../parcelas-contratos/parcelas-contratos-filtro';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../contratos-service\";\nimport * as i2 from \"../parcelas-contratos/parcelas-contratos.service\";\nimport * as i3 from \"primeng/dynamicdialog\";\nimport * as i4 from \"primeng/api\";\nimport * as i5 from \"../../../shared/components/bread-crumb/bread-crumb.component\";\nimport * as i6 from \"primeng/tabview\";\nimport * as i7 from \"../contratos-cadastro-view/contratos-cadastro-view.component\";\nimport * as i8 from \"../parcelas-contratos/parcelas-contratos-pesquisa/parcelas-contratos-pesquisa.component\";\nconst _c0 = () => ({\n  label: \"Contratos\",\n  routerLink: \"/contratos\"\n});\nconst _c1 = a0 => ({\n  label: a0\n});\nconst _c2 = (a0, a1) => [a0, a1];\nexport let ContratosCadastroComponent = /*#__PURE__*/(() => {\n  class ContratosCadastroComponent extends BaseResourceFormComponent {\n    constructor(contratosService, parcelasContratosService, injector, dialogService, messageService,\n    // Isso aqui e para corrigir o erro: ExpressionChangedAfterItHasBeenCheckedError\n    cdref) {\n      super(injector, new Contratos(), contratosService, Contratos.fromJson, new MessageService());\n      this.contratosService = contratosService;\n      this.parcelasContratosService = parcelasContratosService;\n      this.injector = injector;\n      this.dialogService = dialogService;\n      this.messageService = messageService;\n      this.cdref = cdref;\n      this.env = environment;\n      this.filtro = new ParcelasContratosFiltro();\n      this.ptBrLocale = this.loadLocale();\n    }\n    // Isso aqui e para corrigir o erro: ExpressionChangedAfterItHasBeenCheckedError\n    ngAfterContentChecked() {\n      this.cdref.detectChanges();\n    }\n    buildResourceForm() {\n      this.resourceForm = this.formBuilder.group({});\n    }\n    // Ao clicar nas abas dispara este evento\n    onTabChange(event) {\n      // Pega o id do contrato\n      this.contratoId = document.getElementById('id').value;\n      if (event.index == 1) {\n        this.filtro.pagina = 0;\n        // parte de filtrar as parcelas do contrato\n        this.filtro.params = this.filtro.params.append('contratoId', this.contratoId);\n        this.parcelasContratosService.listAllYesPaginacao(this.filtro);\n      }\n    }\n    static #_ = this.ɵfac = function ContratosCadastroComponent_Factory(t) {\n      return new (t || ContratosCadastroComponent)(i0.ɵɵdirectiveInject(i1.ContratosService), i0.ɵɵdirectiveInject(i2.ParcelasContratosService), i0.ɵɵdirectiveInject(i0.Injector), i0.ɵɵdirectiveInject(i3.DialogService), i0.ɵɵdirectiveInject(i4.MessageService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ContratosCadastroComponent,\n      selectors: [[\"app-contratos-cadastro\"]],\n      inputs: {\n        contratoId: \"contratoId\"\n      },\n      features: [i0.ɵɵInheritDefinitionFeature],\n      decls: 7,\n      vars: 10,\n      consts: [[3, \"items\"], [1, \"p-col-12\", \"text-center\"], [\"orientation\", \"top\", 3, \"onChange\"], [\"header\", \"Contratos\", 3, \"selected\"], [\"id\", \"abaParcelas\", \"header\", \"Parcelas\", 3, \"selected\", \"disabled\"]],\n      template: function ContratosCadastroComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelement(0, \"app-bread-crumb\", 0);\n          i0.ɵɵelementStart(1, \"div\", 1)(2, \"p-tabView\", 2);\n          i0.ɵɵlistener(\"onChange\", function ContratosCadastroComponent_Template_p_tabView_onChange_2_listener($event) {\n            return ctx.onTabChange($event);\n          });\n          i0.ɵɵelementStart(3, \"p-tabPanel\", 3);\n          i0.ɵɵelement(4, \"app-contratos-cadastro-view\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"p-tabPanel\", 4);\n          i0.ɵɵelement(6, \"app-parcelas-contratos-pesquisa\");\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"items\", i0.ɵɵpureFunction2(7, _c2, i0.ɵɵpureFunction0(4, _c0), i0.ɵɵpureFunction1(5, _c1, ctx.pageTitle)));\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"selected\", ctx.selectedTab == 0);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"selected\", ctx.selectedTab == 1)(\"disabled\", ctx.env.tabPanelOnOff);\n        }\n      },\n      dependencies: [i5.BreadCrumbComponent, i6.TabView, i6.TabPanel, i7.ContratosCadastroViewComponent, i8.ParcelasContratosPesquisaComponent]\n    });\n  }\n  return ContratosCadastroComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}