{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from \"@angular/core\";\nimport { Validators } from \"@angular/forms\";\nimport { BaseResourceFormComponent } from \"../../../shared/components/base-resource-form/base-resource-form.component\";\nimport { Bairros } from \"./../../../shared/models/bairros\";\nimport { CidadesModalComponent } from './../../cidades/cidades-modal/cidades-modal.component';\nlet BairrosCadastroComponent = class BairrosCadastroComponent extends BaseResourceFormComponent {\n  constructor(bairrosService, injector, dialogService, messageService) {\n    super(injector, new Bairros(), bairrosService, Bairros.fromJson, messageService);\n    this.bairrosService = bairrosService;\n    this.injector = injector;\n    this.dialogService = dialogService;\n    this.messageService = messageService;\n    this.botaoOnOf = false;\n  }\n  buildResourceForm() {\n    this.resourceForm = this.formBuilder.group({\n      id: [null],\n      cidadesId: [null, [Validators.required]],\n      nome: [null, [Validators.required, Validators.minLength(3)]],\n      cidades: this.formBuilder.group({\n        estados: this.formBuilder.group({\n          uf: [null]\n        }),\n        id: [null, [Validators.required]],\n        nome: [null]\n      })\n    });\n  }\n  creationPageTitle() {\n    this.botaoOnOf = false;\n    return \"Cadastro de Novo Bairro\";\n  }\n  editionPageTitle() {\n    const bairrosName = this.resource.nome || \"\";\n    this.botaoOnOf = true;\n    return \"Editando Bairro: \";\n  }\n  // Modal Cidade/estado\n  showCidades($event) {\n    const ref = this.dialogService.open(CidadesModalComponent, {\n      header: 'Selecione a Cidade',\n      width: '70%'\n    });\n    ref.onClose.subscribe(cidade => {\n      //console.log(cidade);\n      this.resourceForm.patchValue({\n        cidades: {\n          id: cidade.id,\n          nome: cidade.nome,\n          estados: {\n            uf: cidade.estados.nome\n          }\n        },\n        cidadesId: cidade.id\n      });\n    });\n  }\n  createResource() {\n    const resource = Bairros.toJson(this.resourceForm.value);\n    this.resourceService.create(resource).subscribe(result => {\n      this.actionsForSuccess(result);\n    }, error => this.actionsForError(error));\n  }\n  updateResource() {\n    const resource = Bairros.toJson(this.resourceForm.value);\n    this.resourceService.update(resource).subscribe(resource => {\n      this.actionsForSuccess(resource);\n    }, error => this.actionsForError(error));\n  }\n};\nBairrosCadastroComponent = __decorate([Component({\n  selector: \"app-bairros-cadastro\",\n  templateUrl: \"./bairros-cadastro.component.html\",\n  styleUrls: [\"./bairros-cadastro.component.css\"]\n})], BairrosCadastroComponent);\nexport { BairrosCadastroComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}